<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Resources</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.5s ease-in-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        };
    </script>
    <style type="text/css">
        .hidden {
            display: none !important;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .slide-up {
            animation: slideUp 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }
        
        @keyframes slideUp {
            0% { transform: translateY(20px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        .resource-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .resource-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* Light/Dark mode transitions */
        .dark .dark\:bg-gray-900,
        .dark .dark\:bg-gray-800,
        .dark .dark\:text-white,
        .dark .dark\:text-gray-200,
        .dark .dark\:border-gray-700,
        html {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 4px;
        }
        
        .dark ::-webkit-scrollbar-thumb {
            background: #4b5563;
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white transition-colors duration-300">
    <!-- Main Content Container -->
    <div id="app" class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Loading Overlay -->
        <div id="loading" class="fixed inset-0 flex items-center justify-center bg-white dark:bg-gray-900 z-50">
            <div class="text-center">
                <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"></div>
                <p class="mt-4 text-lg">Loading resources...</p>
            </div>
        </div>

        <!-- Maintenance Mode Banner -->
        <div id="maintenance-banner" class="hidden bg-yellow-100 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-100 px-4 py-3 rounded-lg mb-6 animate-fade-in">
            <div class="flex items-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                </svg>
                <span id="maintenance-message">This site is currently undergoing maintenance. Some features may be unavailable.</span>
            </div>
        </div>

        <!-- Customer Message Banner -->
        <div id="customer-message-banner" class="hidden bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-100 px-4 py-3 rounded-lg mb-6 animate-fade-in">
            <div class="flex items-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span id="customer-message-text">Important information for our users.</span>
            </div>
            <button id="close-customer-message" class="ml-auto -mr-1 -mt-1 p-1 hover:bg-blue-200 dark:hover:bg-blue-700 rounded">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>

        <!-- Header -->
        <header class="mb-12 text-center">
            <div class="dark-mode-toggle absolute top-4 right-4 cursor-pointer" title="Toggle Dark Mode">
                <!-- Sun icon for dark mode -->
                <svg id="light-icon" class="hidden w-6 h-6 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
                <!-- Moon icon for light mode -->
                <svg id="dark-icon" class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                </svg>
            </div>
            <h1 id="site-title" class="text-4xl font-bold mb-2 animate-fade-in">Study Resources</h1>
            <p id="site-description" class="text-xl text-gray-600 dark:text-gray-300 mb-6 animate-fade-in">Your collection of English language study materials</p>
            <div id="greeting" class="py-4 px-6 bg-primary/10 dark:bg-primary/20 rounded-lg text-primary dark:text-primary-light inline-block animate-slide-up"></div>
        </header>

        <!-- Resources Section -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold mb-6 border-b pb-2 border-gray-200 dark:border-gray-700">Available Resources</h2>
            
            <!-- Filter and Search -->
            <div class="mb-8 flex flex-col md:flex-row gap-4">
                <div class="flex-1">
                    <input type="text" id="search-input" placeholder="Search resources..." class="w-full px-4 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                <div class="flex gap-2">
                    <select id="category-filter" class="px-4 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-primary">
                        <option value="all">All Categories</option>
                    </select>
                    <button id="reset-filters" class="px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 transition">
                        Reset
                    </button>
                </div>
            </div>
            
            <!-- Resources Grid -->
            <div id="resources-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Resource cards will be dynamically inserted here -->
            </div>
            
            <!-- No Results Message -->
            <div id="no-results" class="hidden text-center py-12">
                <svg class="w-16 h-16 mx-auto text-gray-400 dark:text-gray-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <p class="text-xl text-gray-600 dark:text-gray-400">No resources match your search criteria</p>
                <button id="clear-search" class="mt-4 px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition">Clear Search</button>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center text-gray-600 dark:text-gray-400 py-6 border-t border-gray-200 dark:border-gray-800">
            <div class="flex justify-center space-x-4 mb-4">
                <button id="privacy-btn" class="text-primary hover:underline">Privacy Policy</button>
                <span>|</span>
                <button id="terms-btn" class="text-primary hover:underline">Terms of Service</button>
            </div>
            <p id="footer-copyright" class="text-sm">&copy; 2023 Study Resources. All rights reserved.</p>
        </footer>
    </div>

    <!-- Dialog Overlay -->
    <div id="dialog-overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto shadow-xl animate-fade-in">
            <div class="p-6">
                <div class="flex justify-between items-center border-b border-gray-200 dark:border-gray-700 pb-3 mb-4">
                    <h3 id="dialog-title" class="text-xl font-semibold"></h3>
                    <button id="dialog-close" class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div id="dialog-content" class="prose dark:prose-invert max-w-none">
                    <!-- Dialog content will be inserted here -->
                </div>
                <div class="mt-6 flex justify-end">
                    <button id="dialog-accept" class="px-4 py-2 bg-primary text-white rounded hover:bg-primary/90 transition">I Accept</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Resource Access Dialog -->
    <div id="resource-access-overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-lg max-w-md w-full shadow-xl animate-fade-in">
            <div class="p-6">
                <div class="flex justify-between items-center border-b border-gray-200 dark:border-gray-700 pb-3 mb-4">
                    <h3 class="text-xl font-semibold">Access Resource</h3>
                    <button id="resource-dialog-close" class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <p>By accessing this resource, you agree to our Terms of Service and Privacy Policy. Please read these documents before proceeding.</p>
                <div class="mt-6 flex justify-between">
                    <button id="view-terms-privacy" class="text-primary hover:underline">View Terms & Privacy</button>
                    <button id="resource-access-btn" class="px-4 py-2 bg-primary text-white rounded hover:bg-primary/90 transition">I Agree & Access</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // State management
        let siteSettings = {};
        let resources = [];
        let termsAccepted = localStorage.getItem('termsAccepted') === 'true';
        let selectedResource = null;
        let categories = new Set(['all']);

        // DOM Elements
        const loadingElement = document.getElementById('loading');
        const maintenanceBanner = document.getElementById('maintenance-banner');
        const maintenanceMessage = document.getElementById('maintenance-message');
        const customerMessageBanner = document.getElementById('customer-message-banner');
        const customerMessageText = document.getElementById('customer-message-text');
        const closeCustomerMessageButton = document.getElementById('close-customer-message');
        const siteTitleElement = document.getElementById('site-title');
        const siteDescriptionElement = document.getElementById('site-description');
        const greetingElement = document.getElementById('greeting');
        const resourcesGrid = document.getElementById('resources-grid');
        const footerCopyrightElement = document.getElementById('footer-copyright');
        const noResultsElement = document.getElementById('no-results');
        const clearSearchButton = document.getElementById('clear-search');
        const searchInput = document.getElementById('search-input');
        const categoryFilter = document.getElementById('category-filter');
        const resetFiltersButton = document.getElementById('reset-filters');
        
        // Dialog Elements
        const dialogOverlay = document.getElementById('dialog-overlay');
        const dialogTitle = document.getElementById('dialog-title');
        const dialogContent = document.getElementById('dialog-content');
        const dialogCloseButton = document.getElementById('dialog-close');
        const dialogAcceptButton = document.getElementById('dialog-accept');
        
        // Resource Access Dialog Elements
        const resourceAccessOverlay = document.getElementById('resource-access-overlay');
        const resourceDialogCloseButton = document.getElementById('resource-dialog-close');
        const resourceAccessButton = document.getElementById('resource-access-btn');
        const viewTermsPrivacyButton = document.getElementById('view-terms-privacy');
        
        // Button Elements
        const privacyButton = document.getElementById('privacy-btn');
        const termsButton = document.getElementById('terms-btn');
        
        // Dark Mode Elements
        const darkModeToggle = document.querySelector('.dark-mode-toggle');
        const darkIcon = document.getElementById('dark-icon');
        const lightIcon = document.getElementById('light-icon');

        // Initialize dark mode based on user preference
        function initDarkMode() {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
                updateDarkModeIcons(true);
            }

            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
                if (event.matches) {
                    document.documentElement.classList.add('dark');
                    updateDarkModeIcons(true);
                } else {
                    document.documentElement.classList.remove('dark');
                    updateDarkModeIcons(false);
                }
            });
        }

        function updateDarkModeIcons(isDark) {
            if (isDark) {
                darkIcon.classList.add('hidden');
                lightIcon.classList.remove('hidden');
            } else {
                darkIcon.classList.remove('hidden');
                lightIcon.classList.add('hidden');
            }
        }

        // Toggle dark mode
        darkModeToggle.addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
            const isDark = document.documentElement.classList.contains('dark');
            updateDarkModeIcons(isDark);
        });

        // Fetch settings from JSON file
        async function fetchSettings() {
            try {
                const response = await fetch('/settings.json');
                if (!response.ok) {
                    throw new Error('Failed to fetch settings');
                }
                return await response.json();
            } catch (error) {
                console.error('Error fetching settings:', error);
                return null;
            }
        }

        // Initialize the application
        async function initApp() {
            initDarkMode();
            
            // Fetch settings
            const settings = await fetchSettings();
            if (!settings) {
                showError('Failed to load settings. Please try again later.');
                return;
            }
            
            siteSettings = settings;
            resources = settings.resources || [];
            
            // Update site metadata
            updateSiteMetadata();
            
            // Check maintenance mode
            checkMaintenanceMode();
            
            // Check for customer message
            checkCustomerMessage();
            
            // Initialize resources
            initializeResources();
            
            // Initialize search and filters
            initializeFilters();
            
            // Initialize greetings
            showRandomGreeting();
            
            // Initialize dialogs
            initDialogs();
            
            // Hide loading screen with a slight delay for smoother transition
            setTimeout(() => {
                loadingElement.classList.add('opacity-0');
                setTimeout(() => {
                    loadingElement.classList.add('hidden');
                }, 300);
            }, 500);
            
            // Check if terms need to be shown
            if (!termsAccepted && siteSettings.showTermsOnLoad) {
                showTermsAndPrivacy();
            }
        }

        // Update site metadata from settings
        function updateSiteMetadata() {
            document.title = siteSettings.siteTitle || 'Study Resources';
            siteTitleElement.textContent = siteSettings.siteTitle || 'Study Resources';
            siteDescriptionElement.textContent = siteSettings.siteDescription || 'Your collection of English language study materials';
            footerCopyrightElement.textContent = siteSettings.footerText || '© 2023 Study Resources. All rights reserved.';
        }

        // Check if site is in maintenance mode
        function checkMaintenanceMode() {
            if (siteSettings.maintenanceMode) {
                maintenanceMessage.textContent = siteSettings.maintenanceMessage || 'This site is currently undergoing maintenance. Some features may be unavailable.';
                maintenanceBanner.classList.remove('hidden');
            }
        }

        // Check if customer message should be displayed
        function checkCustomerMessage() {
            if (siteSettings.showCustomerMessage && siteSettings.customerMessage) {
                customerMessageText.textContent = siteSettings.customerMessage;
                customerMessageBanner.classList.remove('hidden');
                
                // Add event listener to close button
                closeCustomerMessageButton.addEventListener('click', () => {
                    customerMessageBanner.classList.add('hidden');
                });
            }
        }

        // Initialize resources grid
        function initializeResources() {
            resourcesGrid.innerHTML = '';
            
            if (!resources.length) {
                noResultsElement.classList.remove('hidden');
                return;
            }
            
            // Collect all categories
            resources.forEach(resource => {
                if (resource.category) {
                    categories.add(resource.category);
                }
            });
            
            // Populate category filter
            populateCategoryFilter();
            
            // Create resource cards
            resources.forEach((resource, index) => {
                const card = createResourceCard(resource, index);
                resourcesGrid.appendChild(card);
            });
        }

        // Create a resource card element
        function createResourceCard(resource, index) {
            const card = document.createElement('div');
            card.className = 'resource-card bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-700 animate-fade-in';
            card.style.animationDelay = `${index * 0.05}s`;
            
            const cardContent = `
                <div class="p-5">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white">${resource.title}</h3>
                        ${resource.category ? `<span class="px-2 py-1 text-xs font-medium bg-primary/10 text-primary rounded">${resource.category}</span>` : ''}
                    </div>
                    <p class="text-gray-600 dark:text-gray-300 mb-4">${resource.description || 'No description provided'}</p>
                    <button class="resource-access-btn w-full px-4 py-2 bg-primary text-white rounded hover:bg-primary/90 transition" data-index="${index}">
                        Access Resource
                    </button>
                </div>
            `;
            
            card.innerHTML = cardContent;
            return card;
        }

        // Populate category filter select
        function populateCategoryFilter() {
            categoryFilter.innerHTML = '<option value="all">All Categories</option>';
            
            Array.from(categories)
                .filter(cat => cat !== 'all')
                .sort()
                .forEach(category => {
                    const option = document.createElement('option');
                    option.value = category;
                    option.textContent = category;
                    categoryFilter.appendChild(option);
                });
        }

        // Initialize search and filter functionality
        function initializeFilters() {
            // Search functionality
            searchInput.addEventListener('input', filterResources);
            
            // Category filter
            categoryFilter.addEventListener('change', filterResources);
            
            // Reset filters
            resetFiltersButton.addEventListener('click', () => {
                searchInput.value = '';
                categoryFilter.value = 'all';
                filterResources();
            });
            
            // Clear search button
            clearSearchButton.addEventListener('click', () => {
                searchInput.value = '';
                categoryFilter.value = 'all';
                filterResources();
            });
        }

        // Filter resources based on search and category
        function filterResources() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            const categoryValue = categoryFilter.value;
            
            let filteredCount = 0;
            
            Array.from(resourcesGrid.children).forEach(card => {
                const index = card.querySelector('.resource-access-btn').dataset.index;
                const resource = resources[index];
                
                const matchesSearch = 
                    resource.title.toLowerCase().includes(searchTerm) ||
                    (resource.description && resource.description.toLowerCase().includes(searchTerm));
                
                const matchesCategory = 
                    categoryValue === 'all' || 
                    resource.category === categoryValue;
                
                if (matchesSearch && matchesCategory) {
                    card.classList.remove('hidden');
                    filteredCount++;
                } else {
                    card.classList.add('hidden');
                }
            });
            
            // Show/hide no results message
            if (filteredCount === 0) {
                noResultsElement.classList.remove('hidden');
            } else {
                noResultsElement.classList.add('hidden');
            }
        }

        // Show random greeting from settings
        function showRandomGreeting() {
            if (siteSettings.greetings && siteSettings.greetings.length > 0) {
                const randomIndex = Math.floor(Math.random() * siteSettings.greetings.length);
                greetingElement.textContent = siteSettings.greetings[randomIndex];
            } else {
                greetingElement.textContent = "Welcome to our Study Resources!";
            }
        }

        // Initialize dialog event listeners
        function initDialogs() {
            // Close dialog buttons
            dialogCloseButton.addEventListener('click', closeDialog);
            resourceDialogCloseButton.addEventListener('click', closeResourceDialog);
            
            // Accept terms button
            dialogAcceptButton.addEventListener('click', () => {
                termsAccepted = true;
                localStorage.setItem('termsAccepted', 'true');
                closeDialog();
                
                // If dialog was shown from resource access, open resource
                if (selectedResource) {
                    openResource(selectedResource);
                }
            });
            
            // Resource access button
            resourceAccessButton.addEventListener('click', () => {
                closeResourceDialog();
                showTermsAndPrivacy(); // Show Terms and Privacy before accessing the resource
            });
            
            // View terms and privacy from resource dialog
            viewTermsPrivacyButton.addEventListener('click', () => {
                closeResourceDialog();
                showTermsAndPrivacy();
            });
            
            // Privacy and terms buttons
            privacyButton.addEventListener('click', () => showPrivacyPolicy());
            termsButton.addEventListener('click', () => showTermsOfService());
            
            // Global event delegation for resource buttons
            resourcesGrid.addEventListener('click', (e) => {
                const accessBtn = e.target.closest('.resource-access-btn');
                if (accessBtn) {
                    const index = parseInt(accessBtn.dataset.index);
                    selectedResource = resources[index];
                    
                    if (termsAccepted) {
                        openResource(selectedResource);
                    } else {
                        showResourceAccessDialog();
                    }
                }
            });
        }

        // Show terms and privacy policy dialog
        function showTermsAndPrivacy() {
            dialogTitle.textContent = 'Terms of Service & Privacy Policy';
            
            let content = '<div class="mb-6">';
            content += '<h4 class="text-lg font-semibold mb-2">Terms of Service</h4>';
            content += `<div>${siteSettings.termsOfService || 'Terms of Service content not available.'}</div>`;
            content += '</div>';
            
            content += '<div>';
            content += '<h4 class="text-lg font-semibold mb-2">Privacy Policy</h4>';
            content += `<div>${siteSettings.privacyPolicy || 'Privacy Policy content not available.'}</div>`;
            content += '</div>';
            
            dialogContent.innerHTML = content;
            dialogAcceptButton.textContent = 'I Accept';
            dialogOverlay.classList.remove('hidden');
        }

        // Show privacy policy dialog
        function showPrivacyPolicy() {
            dialogTitle.textContent = 'Privacy Policy';
            dialogContent.innerHTML = siteSettings.privacyPolicy || 'Privacy Policy content not available.';
            dialogAcceptButton.textContent = 'Close';
            dialogOverlay.classList.remove('hidden');
        }

        // Show terms of service dialog
        function showTermsOfService() {
            dialogTitle.textContent = 'Terms of Service';
            dialogContent.innerHTML = siteSettings.termsOfService || 'Terms of Service content not available.';
            dialogAcceptButton.textContent = 'Close';
            dialogOverlay.classList.remove('hidden');
        }

        // Show resource access dialog
        function showResourceAccessDialog() {
            resourceAccessOverlay.classList.remove('hidden');
        }

        // Close main dialog
        function closeDialog() {
            dialogOverlay.classList.add('hidden');
        }

        // Close resource access dialog
        function closeResourceDialog() {
            resourceAccessOverlay.classList.add('hidden');
        }

        // Open resource URL
        function openResource(resource) {
            if (resource && resource.url) {
                window.open(resource.url, '_blank');
            } else {
                showError('Resource URL is not available.');
            }
        }

        // Show error message
        function showError(message) {
            dialogTitle.textContent = 'Error';
            dialogContent.innerHTML = `<p class="text-red-500">${message}</p>`;
            dialogAcceptButton.textContent = 'OK';
            dialogOverlay.classList.remove('hidden');
        }

        // Initialize the app on load
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
